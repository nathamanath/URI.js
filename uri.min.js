(function(){"use strict";!function(r){function t(r){var t=1*r.port;return this.protocol=r.protocol||null,this.subdomain=r.subdomain||null,this.host=r.hostname||null,this.port=t?t:null,this.path="/"!==r.pathname?l(r.pathname):[],this.params=r.search?h(r.search):{},this.hash=r.hash.substring(1)||null,this}var n,a,o,e,i,u,s,h,c,f,p,l=function(r){return r.replace(/(^\/)/,"").split("/")};t.parse=function(n){if("undefined"==typeof n&&(n=r.location.href),!n.match(/^(ftp|http|https|file):\/\/[^ "]+$/))throw new Error("URI.parse requires a valid uri.");var a=document.createElement("a");return a.href=n,new t(a)},t.stringify=function(r){var t,n=r.hash,a=r.port,e=r.path;if(!f(r))throw new Error("URI.stringify requires valid uri object.");if(t=r.protocol+"//"+r.host,a&&(t+=":"+a),t+="/",e&&(t+=e.join("/")),!o(r.params)){var i=[],u=r.params;for(var s in u)if(u.hasOwnProperty(s)){var h=u[s];i.push(c(s,h))}t+="?"+i.join("&")}return n&&(t+="#"+n),t},f=function(r){for(var t,n=["protocol","port","path","params","hash"],a=!0,o=0,e=n.length;e>o;o++)t=n[o],r.hasOwnProperty(t)||(a=!1);return a},c=function(r,t){var n,a=[];if(t instanceof Array)for(var o=0,e=t.length;e>o;o++)n=t[o],a.push(c(r+"[]",n));else{if("object"!=typeof t)return r+"="+t;for(var i in t)t.hasOwnProperty(i)&&(n=t[i],a.push(c(r+"["+i+"]",n)))}return a.join("&")},o=function(r){for(var t in r)if(r.hasOwnProperty(t))return!1;return!0},a=function(r,t){var n,o;for(n in t)t.hasOwnProperty(n)&&(o=t[n],r[n]instanceof Array&&o instanceof Array?r[n]=r[n].concat(o):"object"==typeof r[n]&&"object"==typeof o?r[n]=a(r[n],o):r[n]=o);return r},p=function(r){return r.match(/^(true|false)+$/)?"bool":r.match(/^[0-9]*[.]*[0-9]+$/)?"num":"str"},n=function(r){switch(p(r)){case"bool":return!!r;case"num":return parseFloat(r);default:return r}},e=function(r){return r.match(/\[/)},u=function(r){var t=[],n=r.match(/([a-zA-Z0-9]+)(\[[0-9a-zA-z]*\])/);return t.push(n[1]),t=t.concat(n[2].match(/\[([a-zA-Z0-9]*)\]/g))},s=function(r,t){for(var n,a,o=r.length-1;o>=0;o+=-1)n=r[o],"[]"===n?a=[t]:(a={},a[n.replace(/\[|\]/g,"")]=t),t=a;return t},i=function(r,t){var a;return a={},a[r]=n(t),a},h=function(r){var t,o,h,c,f,p;f=r.split(/[&](?=[^&]+=)/),o={};for(var l=0,v=f.length;v>l;l++)c=f[l],h=c.replace("?","").split("="),e(h[0])?(t=u(h[0]),p=s(t,n(h[1]))):p=i(h[0],h[1]),o=a(o,p);return o},r.URI=t}(window)}).call(this);
