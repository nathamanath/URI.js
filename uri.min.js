(function(){"use strict";!function(r){function t(r){return this.protocol=r.protocol||null,this.subdomain=r.subdomain||null,this.host=r.hostname||null,this.port=r.port&&1*r.port!==0?1*r.port:null,this.path="/"!==r.pathname?l(r.pathname):[],this.params=r.search?h(r.search):{},this.hash=r.hash.substring(1)||null,this}var n,o,e,a,i,s,u,h,c,f,p,l=function(r){return r.substring(1).split("/")};t.parse=function(n){var o;if("undefined"==typeof n&&(n=r.location.href),!n.match(/^(ftp|http|https|file):\/\/[^ "]+$/))throw new Error("URI.parse requires a valid uri.");return o=document.createElement("a"),o.href=n,new t(o)},t.stringify=function(r){var t,n=r.hash,o=r.port,a=r.path;if(!f(r))throw new Error("URI.stringify requires valid uri object.");if(t=r.protocol+"//"+r.host,o&&(t+=":"+o),t+="/",a&&(t+=a.join("/")),!e(r.params)){var i=[],s=r.params;for(var u in s)if(s.hasOwnProperty(u)){var h=s[u];i.push(c(u,h))}t+="?"+i.join("&")}return n&&(t+="#"+n),t},f=function(r){var t,n,o,e,a;for(n=["protocol","port","path","params","hash"],o=!0,e=0,a=n.length;a>e;e++)t=n[e],r.hasOwnProperty(t)||(o=!1);return o},c=function(r,t){var n,o,e,a;if(n=[],t instanceof Array)for(e=0,a=t.length;a>e;e++)o=t[e],n.push(c(r+"[]",o));else{if("object"!=typeof t)return r+"="+t;for(var i in t)t.hasOwnProperty(i)&&(o=t[i],n.push(c(r+"["+i+"]",o)))}return n.join("&")},e=function(r){return 0===Object.getOwnPropertyNames(r).length},o=function(r,t){var n,e;for(n in t)t.hasOwnProperty(n)&&(e=t[n],r[n]=r[n]instanceof Array&&e instanceof Array?r[n].concat(e):"object"==typeof r[n]&&"object"==typeof e?o(r[n],e):e);return r},p=function(r){return r.match(/^(true|false)+$/)?"bool":r.match(/^[0-9]*[.]*[0-9]+$/)?"num":"str"},n=function(r){switch(p(r)){case"bool":return!!r;case"num":return parseFloat(r);default:return r}},a=function(r){return r.match(/\[/)},s=function(r){var t,n;return t=[],n=r.match(/([a-zA-Z0-9]+)(\[[0-9a-zA-z]*\])/),t.push(n[1]),t=t.concat(n[2].match(/\[([a-zA-Z0-9]*)\]/g))},u=function(r,t){var n,o,e;for(e=r.length-1;e>=0;e+=-1)n=r[e],"[]"===n?o=[t]:(o={},o[n.replace(/\[|\]/g,"")]=t),t=o;return t},i=function(r,t){var o;return o={},o[r]=n(t),o},h=function(r){var t,e,h,c,f,p,l,m;for(f=r.split("&"),e={},l=0,m=f.length;m>l;l++)c=f[l],h=c.replace("?","").split("="),a(h[0])?(t=s(h[0]),p=u(t,n(h[1]))):p=i(h[0],h[1]),e=o(e,p);return e},r.URI=t}(window)}).call(this);
